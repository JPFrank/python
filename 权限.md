##Java 鉴权和验权模块设计
<br />
权限模块首先需要了解过滤器和拦截器这两部分的内容：
过滤器和拦截器都属于AOP（面向切面编程）思想的具体实现，系统层面上的问题类似权限，日志，事务等都可以通过AOP的思想来解决。

过滤器依赖servlet容器，而且不由Web服务器执行，是在容器回调用完成，可以修改request和response，所以CORS(后续补充文章介绍CORS)是在过滤器中设计完成。
拦截器首先是属于Web应用的，拦截器可以通过DI来使用工厂中的其他实例实现拦截器的逻辑(这里又有一大坨思想的理解与介绍，大致方向为：单例->DI->IOC->23中设计模式 ~>.<~，后续慢慢补充自己的理解，这里其实是最基础也是最重要的关于我们用的东西到底是如何产生的)
我自己的理解就是进入Web服务器之前，可以称为Filter,进入Web服务器之后，称为Interceptor.

回归正题，权限模块主要用到拦截器
大体思路如下：
  涉及到权限到时候，最重要到一步就是表结构设计，User表，Permission表，Role表，User_role表，Role_Permission表。具体表结构参考上传的代码。
大体流程如下：
  0.在数据库中配置好所有的权限信息，给用户分配角色，给角色分配权限，通过这样的关联关系，能够通过用户来获取对应的权限信息。
  1.用户登录之后，将用户信息和用户相关的权限信息存入Redis中，以User_Id 通过Hash加密算法(SHA-256,加密算法后续继续总结)得到SessioID作为Key，相关信息作为Value，然后在利用JWT将SessionID封装为Token。
  2.登录之后将Token返回给前端，前端每次发起新的请求的时候，在request head里面都需要将Token带着传递到后台。
  3.JWT拦截器获取到Head里面到Token，解析Token取出登录时存入Redis的相关信息，封装成对应User对象传递给权限拦截器。
  4.Permission拦截器获取到用户相关信息之后，对比request的method和URL，如果匹配成功，说明该用户的这个操作，之前在数据库中就被允许，也就是该用户有权限这么做；如果没有匹配，则抛出该用户没有此操作权限的异常。
